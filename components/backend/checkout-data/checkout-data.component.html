<div class="horizontal-flex full-height">
    <div class="article full flex-item">
        <div class="article-title">
            <span>{{app.text('checkout_overview', 'shop')}}</span>
            <div class="horizontal-flex flex-item">
                <label *ngIf="userSelection">
                    <select [(ngModel)]="userId" (change)="getResultData()">
                        <option [ngValue]="null">{{app.text('all', 'shop')}}</option>
                        <option *ngFor="let id of availableUserIds" [ngValue]="id">
                            <span *ngIf="!app.userById(id).firstName && !app.userById(id).lastName">{{app.userById(id).login}}</span>
                            <span *ngIf="app.userById(id).firstName || app.userById(id).lastName">{{app.userById(id).firstName}} {{app.userById(id).lastName}}</span>
                        </option>
                    </select>
                </label>
                <label>
                    <input type="date" mwlFlatpickr
                           [(ngModel)]="startDate"
                           (ngModelChange)="startDate = $event; getResultData()"
                           dateFormat="Y-m-dTH:i"
                           altFormat="F j, Y H:i"
                           placeholder="Not set">
                </label>
                <label>
                    <input type="date" mwlFlatpickr
                           [(ngModel)]="endDate"
                           (ngModelChange)="endDate = $event; getResultData()"
                           dateFormat="Y-m-dTH:i"
                           altFormat="F j, Y H:i"
                           placeholder="Not set">
                </label>
            </div>
            <div class="horizontal-flex flex-item flex-end">
                <button class="save-button" (click)="exportTable()">
                    {{app.text('export', 'shop')}}
                </button>
                <button class="print-button" (click)="printTable()">
                    {{app.text('print', 'shop')}}
                </button>
            </div>
        </div>
        <div class="article-content">

            <table #tableElement>
                <thead>
                <tr>
                    <th>{{app.text('date', 'shop')}}</th>
                    <th>{{app.text('price', 'shop')}}</th>
                    <th>{{app.text('seller', 'shop')}}</th>
                    <th>{{app.text('customer', 'shop')}}</th>
                    <th>{{app.text('products', 'shop')}}</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let checkout of resultData">
                    <th>
                        {{app.date(checkout.date).full}}
                    </th>
                    <td>
                        <b>{{checkout.amount}} €</b>
                    </td>
                    <td>
                        <app-user *ngIf="checkout.userId" [user]="app.userById(checkout.userId)"></app-user>
                    </td>
                    <td>
                        <app-user *ngIf="checkout.customerId" [user]="app.userById(checkout.customerId)"></app-user>
                        <span *ngIf="!checkout.customerId">{{app.text('anonym', 'shop')}}</span>
                    </td>
                    <td>
                        <ul *ngIf="checkout.data && checkout.data.products">
                            <li *ngFor="let product of checkout.data.products">
                                <span>{{product.amount}}x </span> <b>{{product.name}} </b> <span>à {{product.price}}
                                €</span><span> = {{product.amount * product.price}}
                                €</span>
                            </li>
                        </ul>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="article-footer">
            <h3>{{app.text('total', 'shop')}} = {{totalAmount}} €</h3>
        </div>
    </div>
</div>



